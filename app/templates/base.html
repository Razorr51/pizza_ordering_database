<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block title %}Pizza Ordering{% endblock %}</title>
    <style>
        :root {
            --bg: #0d1326;
            --text: #f5f7fa;
            --muted: #9aa3b8;
            --card: #1b233d;
            --accent: #6ee7b7;
            --error: #f87171;
            --info: #60a5fa;
            --warning: #fbbf24;
        }
        * { box-sizing: border-box; }
        body { margin: 0; font-family: "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background: var(--bg); color: var(--text); }
        a { color: var(--accent); text-decoration: none; }
        a:hover { text-decoration: underline; }
        header { background: rgba(10, 16, 33, 0.9); border-bottom: 1px solid rgba(148, 163, 184, 0.2); }
        .nav { max-width: 1100px; margin: 0 auto; padding: 16px; display: flex; justify-content: space-between; align-items: center; }
        .nav-links { display: flex; gap: 16px; align-items: center; }
        main { max-width: 1100px; margin: 32px auto; padding: 0 16px 48px; }
        .muted { color: var(--muted); }
        input, button { font-family: inherit; }
        .flash { padding: 12px 16px; border-radius: 10px; margin-bottom: 16px; border: 1px solid transparent; }
        .flash-success { background: rgba(22, 101, 52, 0.2); border-color: rgba(22, 101, 52, 0.5); }
        .flash-error { background: rgba(153, 27, 27, 0.2); border-color: rgba(153, 27, 27, 0.5); }
        .flash-info { background: rgba(37, 99, 235, 0.2); border-color: rgba(37, 99, 235, 0.5); }
        .flash-warning { background: rgba(217, 119, 6, 0.2); border-color: rgba(217, 119, 6, 0.5); }
    </style>
    {% block head_styles %}{% endblock %}
</head>
<body>
    <header>
        <nav class="nav">
            <div><a href="{{ url_for('menu.get_menu_html') }}">üçï Mamma Mia's</a></div>
            <div class="nav-links">
                <a href="{{ url_for('menu.get_menu_html') }}">Menu</a>
                <a href="{{ url_for('reports.dashboard') }}">Reports</a>
                {% if session.get('customer_id') %}
                    <span>Hi, {{ session.get('customer_name') }}!</span>
                    <form action="{{ url_for('auth.logout') }}" method="post" style="margin:0;">
                        <button type="submit" style="background:none;border:none;color:var(--muted);cursor:pointer;">Log out</button>
                    </form>
                {% else %}
                    <a href="{{ url_for('auth.signup_form') }}">Sign up</a>
                    <a href="{{ url_for('auth.login_form') }}">Log in</a>
                {% endif %}
            </div>
        </nav>
    </header>
    <main>
        {% with messages = get_flashed_messages(with_categories=True) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="flash flash-{{ category }}">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}
        {% block content %}{% endblock %}
    </main>
</body>
</html>
